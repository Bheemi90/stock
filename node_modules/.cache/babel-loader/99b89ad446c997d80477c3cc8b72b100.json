{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\hp\\\\Downloads\\\\stock-dashboard-master\\\\stock-dashboard-master\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\hp\\\\Downloads\\\\stock-dashboard-master\\\\stock-dashboard-master\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\hp\\\\Downloads\\\\stock-dashboard-master\\\\stock-dashboard-master\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useContext,useEffect,useState}from\"react\";import ChartFilter from\"./ChartFilter\";import Card from\"./Card\";import{Area,XAxis,YAxis,ResponsiveContainer,AreaChart,Tooltip}from\"recharts\";import ThemeContext from\"../context/ThemeContext\";import StockContext from\"../context/StockContext\";import{fetchHistoricalData}from\"../utils/api/stock-api\";import{createDate,convertDateToUnixTimestamp,convertUnixTimestampToDate}from\"../utils/helpers/date-helper\";import{chartConfig}from\"../constants/config\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Chart=function Chart(){var _useState=useState(\"1W\"),_useState2=_slicedToArray(_useState,2),filter=_useState2[0],setFilter=_useState2[1];var _useContext=useContext(ThemeContext),darkMode=_useContext.darkMode;var _useContext2=useContext(StockContext),stockSymbol=_useContext2.stockSymbol;var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var formatData=function formatData(data){return data.c.map(function(item,index){return{value:item.toFixed(2),date:convertUnixTimestampToDate(data.t[index])};});};useEffect(function(){var getDateRange=function getDateRange(){var _chartConfig$filter=chartConfig[filter],days=_chartConfig$filter.days,weeks=_chartConfig$filter.weeks,months=_chartConfig$filter.months,years=_chartConfig$filter.years;var endDate=new Date();var startDate=createDate(endDate,-days,-weeks,-months,-years);var startTimestampUnix=convertDateToUnixTimestamp(startDate);var endTimestampUnix=convertDateToUnixTimestamp(endDate);return{startTimestampUnix:startTimestampUnix,endTimestampUnix:endTimestampUnix};};var updateChartData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _getDateRange,startTimestampUnix,endTimestampUnix,resolution,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_getDateRange=getDateRange(),startTimestampUnix=_getDateRange.startTimestampUnix,endTimestampUnix=_getDateRange.endTimestampUnix;resolution=chartConfig[filter].resolution;_context.next=5;return fetchHistoricalData(stockSymbol,resolution,startTimestampUnix,endTimestampUnix);case 5:result=_context.sent;setData(formatData(result));_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);setData([]);console.log(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function updateChartData(){return _ref.apply(this,arguments);};}();updateChartData();},[stockSymbol,filter]);return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"ul\",{className:\"flex absolute top-2 right-2 z-40\",children:Object.keys(chartConfig).map(function(item){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(ChartFilter,{text:item,active:filter===item,onClick:function onClick(){setFilter(item);}})},item);})}),/*#__PURE__*/_jsx(ResponsiveContainer,{children:/*#__PURE__*/_jsxs(AreaChart,{data:data,children:[/*#__PURE__*/_jsx(\"defs\",{children:/*#__PURE__*/_jsxs(\"linearGradient\",{id:\"chartColor\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[/*#__PURE__*/_jsx(\"stop\",{offset:\"5%\",stopColor:darkMode?\"#312e81\":\"rgb(199 210 254)\",stopOpacity:0.8}),/*#__PURE__*/_jsx(\"stop\",{offset:\"95%\",stopColor:darkMode?\"#312e81\":\"rgb(199 210 254)\",stopOpacity:0})]})}),/*#__PURE__*/_jsx(Tooltip,{contentStyle:darkMode?{backgroundColor:\"#111827\"}:null,itemStyle:darkMode?{color:\"#818cf8\"}:null}),/*#__PURE__*/_jsx(Area,{type:\"monotone\",dataKey:\"value\",stroke:\"#312e81\",fill:\"url(#chartColor)\",fillOpacity:1,strokeWidth:0.5}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"date\"}),/*#__PURE__*/_jsx(YAxis,{domain:[\"dataMin\",\"dataMax\"]})]})})]});};export default Chart;","map":{"version":3,"sources":["C:/Users/hp/Downloads/stock-dashboard-master/stock-dashboard-master/src/components/Chart.js"],"names":["React","useContext","useEffect","useState","ChartFilter","Card","Area","XAxis","YAxis","ResponsiveContainer","AreaChart","Tooltip","ThemeContext","StockContext","fetchHistoricalData","createDate","convertDateToUnixTimestamp","convertUnixTimestampToDate","chartConfig","Chart","filter","setFilter","darkMode","stockSymbol","data","setData","formatData","c","map","item","index","value","toFixed","date","t","getDateRange","days","weeks","months","years","endDate","Date","startDate","startTimestampUnix","endTimestampUnix","updateChartData","resolution","result","console","log","Object","keys","backgroundColor","color"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport ChartFilter from \"./ChartFilter\";\nimport Card from \"./Card\";\nimport {\n  Area,\n  XAxis,\n  YAxis,\n  ResponsiveContainer,\n  AreaChart,\n  Tooltip,\n} from \"recharts\";\nimport ThemeContext from \"../context/ThemeContext\";\nimport StockContext from \"../context/StockContext\";\nimport { fetchHistoricalData } from \"../utils/api/stock-api\";\nimport {\n  createDate,\n  convertDateToUnixTimestamp,\n  convertUnixTimestampToDate,\n} from \"../utils/helpers/date-helper\";\nimport { chartConfig } from \"../constants/config\";\n\nconst Chart = () => {\n  const [filter, setFilter] = useState(\"1W\");\n\n  const { darkMode } = useContext(ThemeContext);\n\n  const { stockSymbol } = useContext(StockContext);\n\n  const [data, setData] = useState([]);\n\n  const formatData = (data) => {\n    return data.c.map((item, index) => {\n      return {\n        value: item.toFixed(2),\n        date: convertUnixTimestampToDate(data.t[index]),\n      };\n    });\n  };\n\n  useEffect(() => {\n    const getDateRange = () => {\n      const { days, weeks, months, years } = chartConfig[filter];\n\n      const endDate = new Date();\n      const startDate = createDate(endDate, -days, -weeks, -months, -years);\n\n      const startTimestampUnix = convertDateToUnixTimestamp(startDate);\n      const endTimestampUnix = convertDateToUnixTimestamp(endDate);\n      return { startTimestampUnix, endTimestampUnix };\n    };\n\n    const updateChartData = async () => {\n      try {\n        const { startTimestampUnix, endTimestampUnix } = getDateRange();\n        const resolution = chartConfig[filter].resolution;\n        const result = await fetchHistoricalData(\n          stockSymbol,\n          resolution,\n          startTimestampUnix,\n          endTimestampUnix\n        );\n        setData(formatData(result));\n      } catch (error) {\n        setData([]);\n        console.log(error);\n      }\n    };\n\n    updateChartData();\n  }, [stockSymbol, filter]);\n\n  return (\n    <Card>\n      <ul className=\"flex absolute top-2 right-2 z-40\">\n        {Object.keys(chartConfig).map((item) => (\n          <li key={item}>\n            <ChartFilter\n              text={item}\n              active={filter === item}\n              onClick={() => {\n                setFilter(item);\n              }}\n            />\n          </li>\n        ))}\n      </ul>\n      <ResponsiveContainer>\n        <AreaChart data={data}>\n          <defs>\n            <linearGradient id=\"chartColor\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n              <stop\n                offset=\"5%\"\n                stopColor={darkMode ? \"#312e81\" : \"rgb(199 210 254)\"}\n                stopOpacity={0.8}\n              />\n              <stop\n                offset=\"95%\"\n                stopColor={darkMode ? \"#312e81\" : \"rgb(199 210 254)\"}\n                stopOpacity={0}\n              />\n            </linearGradient>\n          </defs>\n          <Tooltip\n            contentStyle={darkMode ? { backgroundColor: \"#111827\" } : null}\n            itemStyle={darkMode ? { color: \"#818cf8\" } : null}\n          />\n          <Area\n            type=\"monotone\"\n            dataKey=\"value\"\n            stroke=\"#312e81\"\n            fill=\"url(#chartColor)\"\n            fillOpacity={1}\n            strokeWidth={0.5}\n          />\n          <XAxis dataKey=\"date\" />\n          <YAxis domain={[\"dataMin\", \"dataMax\"]} />\n        </AreaChart>\n      </ResponsiveContainer>\n    </Card>\n  );\n};\n\nexport default Chart;\n"]},"metadata":{},"sourceType":"module"}